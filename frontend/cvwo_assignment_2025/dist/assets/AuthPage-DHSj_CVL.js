import{r as h,u,j as o,B as p,t as s}from"./index-BpfM_tVL.js";import{F as g}from"./field-Dn6ntP2Z.js";import{c as i,B as f,V as y,T as m,I as w}from"./config-B27R141A.js";const x=async a=>{try{const e=await fetch(`${i.backendPath}/api/users`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:a})});if(e.ok)return await e.json();if(e.status!==409)throw new Error(`Failed to create user ${a}`)}catch(e){throw console.error("Error creating user:",e),e}try{const e=await fetch(`${i.backendPath}/api/users/${a}/id`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw new Error(`Failed to get user ID of ${a}`);return await e.json()}catch(e){throw console.error("Error getting user ID:",e),e}},I=({setUsername:a,setUserID:e})=>{const[t,c]=h.useState(""),l=u(),n=async()=>{try{if(t.length>300)throw new Error("Username too long!");const r=await x(t);a(t),e(r.user_id),s.create({description:`Logged in as ${t}`,type:"success"}),l("/")}catch(r){s.create({description:`Failed to log in as ${t}: ${r}`,type:"error"})}},d=r=>{r.key==="Enter"&&!r.shiftKey&&(r.preventDefault(),n())};return o.jsx(f,{minH:"80vh",display:"flex",alignItems:"center",justifyContent:"center",children:o.jsxs(y,{spaceY:6,p:8,bg:"white",shadow:"md",borderRadius:"md",width:"100%",maxWidth:"400px",textAlign:"center",children:[o.jsx(m,{fontSize:"2xl",fontWeight:"bold",color:"teal.600",children:"Welcome to Your Hangout Hub!"}),o.jsx(g,{label:"What is your name?",color:"gray.800",invalid:t.length>100,errorText:"Username cannot be longer than 100 characters",children:o.jsx(w,{placeholder:"Username",value:t,onChange:r=>c(r.target.value),focusRingColor:"teal.500",onKeyDown:d})}),o.jsx(p,{onClick:n,variant:"solid",colorPalette:"teal",disabled:t.length>100,children:"Enter"})]})})};export{I as default};
