import{r as d,u as h,j as a,B as u,t as n}from"./index-DAGeL9RU.js";import{F as p}from"./field-bOODKLtN.js";import{c as s,B as g,V as f,T as m,I as x}from"./config-C-JR7vwZ.js";const w=async r=>{try{const e=await fetch(`${s.backendPath}/api/users`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:r})});if(e.ok)return await e.json();if(e.status!==409)throw new Error(`Failed to create user ${r}`)}catch(e){throw console.error("Error creating user:",e),e}try{const e=await fetch(`${s.backendPath}/api/users/${r}/id`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw new Error(`Failed to get user ID of ${r}`);return await e.json()}catch(e){throw console.error("Error getting user ID:",e),e}},E=({setUsername:r,setUserID:e})=>{const[t,i]=d.useState(""),c=h(),l=async()=>{try{if(t.length>300)throw new Error("Username too long!");const o=await w(t);r(t),e(o.user_id),n.create({description:`Logged in as ${t}`,type:"success"}),c("/")}catch(o){n.create({description:`Failed to log in as ${t}: ${o}`,type:"error"})}};return a.jsx(g,{minH:"80vh",display:"flex",alignItems:"center",justifyContent:"center",children:a.jsxs(f,{spaceY:6,p:8,bg:"white",shadow:"md",borderRadius:"md",width:"100%",maxWidth:"400px",textAlign:"center",children:[a.jsx(m,{fontSize:"2xl",fontWeight:"bold",color:"teal.600",children:"Welcome to Your Hangout Hub!"}),a.jsx(p,{label:"What is your name?",color:"gray.800",invalid:t.length>100,errorText:"Username cannot be longer than 100 characters",children:a.jsx(x,{placeholder:"Username",value:t,onChange:o=>i(o.target.value),focusRingColor:"teal.500"})}),a.jsx(u,{onClick:l,variant:"solid",colorPalette:"teal",disabled:t.length>100,children:"Enter"})]})})};export{E as default};
